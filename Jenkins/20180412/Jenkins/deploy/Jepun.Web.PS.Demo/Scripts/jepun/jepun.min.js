/*! jepun 2018-03-29 */
function normaliseParams(a){if("string"==typeof a)a=a.split(" ");else if(!$.isArray(a)){var b=[];for(var c in a)b[0]=c,b[1]=a[c];a=b}return a}function extractOtherDate(a,b,c){if(b.constructor===Date)return b;var d=$.datepicker._getInst(a),e=null;try{"string"==typeof b&&"today"!==b&&(e=$.datepicker.parseDate($.datepicker._get(d,"dateFormat"),b,$.datepicker._getFormatConfig(d)))}catch(f){}return e=e?e:"today"===b?new Date:c?null:$(b).datepicker("getDate"),e&&e.setHours(0,0,0,0),e}var jCore;if(jCore&&("object"!=typeof jCore||jCore.name))throw new Error("Namespace 'jCore' already exists");jCore={},jCore.name="jCore",jCore.version=1,jCore.object=function(a){function b(){}return b.prototype=a,new b},jCore.mixin=function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},jCore.inheritPrototype=function(a,b){var c=jCore.object(b.prototype);c.constructor=a,a.prototype=c},jCore.createComparisonFunction=function(a,b){var c;switch(b){case"desc":case"Desc":case"DESC":c=-1;break;default:c=1}return function(b,d){var e=b[a],f=d[a];return e<f?-1*c:e>f?1*c:0}},jCore.chunk=function(a,b,c){setTimeout(function(){var d=a.shift();b.call(c,d),a.length>0&&setTimeout(arguments.callee,100)},100)},jCore.throttle=function(a,b,c,d){var e=c||100;clearTimeout(a.tId),a.tId=setTimeout(function(){a.call(b,d)},e)},jCore.curry=function(a){var b=Array.prototype.slice.call(arguments,1);return function(){var c=Array.prototype.slice.call(arguments),d=b.concat(c);return a.apply(null,d)}},jCore.bind=function(a,b){var c=Array.prototype.slice.call(arguments,2);return function(){var d=Array.prototype.slice.call(arguments),e=c.concat(d);return a.apply(b,e)}},jCore.EventTarget=function(a){return this instanceof jCore.EventTarget?(this.id=a,this.handlers={},this.args={},void 0):new jCore.EventTarget(a)},jCore.EventTarget.prototype={constructor:jCore.EventTarget,addHandler:function(a,b,c){"undefined"==typeof this.handlers[a]&&(this.handlers[a]=[],this.args[a]=[]),this.handlers[a].push(b),this.args[a].push(c)},fire:function(a){if(a.target||(a.target=this),this.handlers[a.type]instanceof Array)for(var b=this.handlers[a.type],c=this.args[a.type],d=0,e=b.length;d<e;d++)b[d](a,c[d])},removeHandler:function(a,b){if(this.handlers[a]instanceof Array){for(var c=this.handlers[a],d=this.args[a],e=0,f=c.length;e<f&&c[e]!==b;e++);c.splice(e,1),d.splice(e,1)}},getHandlerCount:function(a){return this.handlers[a]instanceof Array?this.handlers[a].length:0}},jCore.eventUtil={addHandler:function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent?a.attachEvent("on"+b,c):a["on"+b]=c},removeHandler:function(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent?a.detachEvent("on"+b,c):a["on"+b]=null},getButton:function(a){if(document.implementation.hasFeature("MouseEvents","2.0"))return a.button;switch(a.button){case 0:case 1:case 3:case 5:case 7:return 0;case 2:case 6:return 2;case 4:return 1}},getCharCode:function(a){return"number"==typeof a.charCode&&0!==a.charCode?a.charCode:a.keyCode},clearClipboardText:function(a){window.clipboardData?window.clipboardData.clearData("text"):a.clipboardData&&a.clipboardData.clearData("text/plain")},getClipboardText:function(a){var b=a.clipboardData||window.clipboardData;return b.getData("text")},setClipboardText:function(a,b){a.clipboardData?a.clipboardData.setData("text/plain",b):window.clipboardData&&window.clipboardData.setData("text",b)},getEvent:function(a){return a?a:window.event},getRelatedTarget:function(a){return a.relatedTarget?a.relatedTarget:a.toElement?a.toElement:a.fromElement?a.fromElement:null},getTarget:function(a){return a.target||a.srcElement},getWheelDelta:function(a){return a.wheelDelta?jFun.client.engine.opera&&jFun.client.engine.opera<9.5?-a.wheelDelta:a.wheelDelta:40*-a.detail},preventDefault:function(a){a.preventDefault?a.preventDefault():a.returnValue=!1},stopPropagation:function(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0}},jCore.createXHR=function(){return"undefined"!=typeof XMLHttpRequest?jCore.createXHR=function(){return new XMLHttpRequest}:"undefined"!=typeof ActiveXObject?jCore.createXHR=function(){if("string"!=typeof arguments.callee.activeXString){var a,b,c=["MSXML2.XMLHttp.6.0","MSXML2.XMLHttp.3.0","MSXML2.XMLHttp"];for(a=0,b=c.length;a<b;a++)try{var d=new ActiveXObject(c[a]);return arguments.callee.activeXString=c[a],d}catch(e){}}return new ActiveXObject(arguments.callee.activeXString)}:jCore.createXHR=function(){throw new Error("No XHR object available.")},jCore.createXHR()},jCore.createCORSRequest=function(a,b){var c=new XMLHttpRequest;return"withCredentials"in c?c.open(a,b,!0):"undefined"!=typeof XDomainRequest?(c=new XDomainRequest,c.open(a,b)):c=null,c},jCore.getLocalStorage=function(){if("object"==typeof localStorage)return localStorage;if("object"==typeof GlbEnv.storage)return GlbEnv.storage[location.host];throw new Error("Local storage not available.")},jCore.WorkQueue=function(a,b){return this instanceof jCore.WorkQueue?(this.fn=a,this.milliSecond=b,this.queue=[],this.tId=null,void 0):new jCore.WorkQueue(a,b)},jCore.WorkQueue.prototype={constructor:jCore.WorkQueue,enqueue:function(a){this.queue.push(a)},dequeue:function(){return this.queue.pop()},peek:function(){return this.queue[this.queue.length]},get:function(){return this.queue},remove:function(a){this.queue.splice(a,1)},removeAll:function(){this.queue=[]},doWork:function(){try{if(0===this.queue.length)return;this.fn(this.dequeue())}catch(a){console.error(a)}},length:function(){return this.queue.length},start:function(){var a=this;a.tId=setTimeout(function(){a.doWork(),a.tId=setTimeout(arguments.callee,a.milliSecond)},a.milliSecond)},stop:function(){var a=this;clearTimeout(a.tId)}},jCore.Cache=function(){this.cache={}},jCore.Cache.prototype={setItem:function(a,b){if("undefined"!=typeof b&&"undefined"!=typeof a)return this.cache[a]=b,this},getItem:function(a){return this.cache[a]},hasItem:function(a){return this.cache.hasOwnProperty(a)},removeItem:function(a){return delete this.cache[a],this},removeLikeItem:function(a){for(var b in this.cache)b.indexOf(a)>=0&&delete this.cache[b];return this},count:function(){var a=0;for(var b in this.cache)a++;return a},listItem:function(){var a=[];for(var b in this.cache)this.cache.hasOwnProperty(b)&&a.push(b+"=>"+this.cache[b]);return a.join("\n")},clear:function(){return this.cache={},this}},jCore.Dictionary=function(a){return this instanceof jCore.Dictionary?(this.dictionary=void 0===a?{}:a,void(this.n=0)):new jCore.Dictionary(a)},jCore.Dictionary.prototype={constructor:jCore.Dictionary,addItem:function(a,b){if("undefined"!=typeof b&&"undefined"!=typeof a){if(this.hasItem(a))throw new Error("key already exists!!");return this.dictionary[a]=b,this.n++,this}},setItem:function(a,b){if("undefined"!=typeof b&&"undefined"!=typeof a){if(!this.hasItem(a))throw new Error("key not exists!!");return this.dictionary[a]=b,this}},getItem:function(a){return this.hasItem(a)?this.dictionary[a]:""},getItems:function(){return this.dictionary},removeAll:function(){return this.dictionary={},this.n=0,this},removeItem:function(a){return this.hasItem(a)?(delete this.dictionary[a],this.n--,this):this},removeLikeItem:function(a){for(var b in this.dictionary)b.indexOf(a)>=0&&(delete this.dictionary[b],this.n--);return this},hasItem:function(a){return a in this.dictionary},count:function(){return this.n},listItem:function(){var a=[];for(var b in this.dictionary)this.dictionary.hasOwnProperty(b)&&a.push(b+"=>"+this.dictionary[b]);return a.join("\n")},foreach:function(a,b){for(var c in this.dictionary)this.dictionary.hasOwnProperty(c)&&a.call(b,this.dictionary[c])},toArray:function(){var a=[];return this.foreach(function(b){a.push(b)}),a}},jCore.DynamicObj=function(){function a(){if(!(this instanceof jCore.DynamicObj))return new jCore.DynamicObj}return a.prototype={constructor:a,load:function(a){for(var b in a)this[b]=a[b];return this},setProp:function(a,b){return this[a]=b,this},getProp:function(a){return this.hasItem(a)?this[a]:""},hasProp:function(a){return a in this},removeProp:function(a){return delete this[a],this},removeAll:function(){for(var a in this)this.hasOwnProperty(a)&&delete this[a];return this},toLog:function(){console.log("start");for(var a in this)this.hasOwnProperty(a)&&(console.log(a+":"),console.log(this[a]));return console.log("end"),this},toJSON:function(a){var b={};for(var c in this)this.hasOwnProperty(c)&&(b[c]=this[c]);for(var d in a)b[d]=a[d];return b},decode:function(a){return decodeURIComponent(this[a])}},a}();var jCom;if(jCom&&("object"!=typeof jCom||jCom.name))throw new Error("Namespace 'jCom' already exists");jCom={},jCom.name="jCom",jCom.version=1,jCom.urlPath=function(){var a="/"+window.location.pathname.split("/")[1]+"/";return function(){var b;switch(arguments.length){case 0:b=a;break;case 1:b=arguments[0].indexOf("http")>=0?arguments[0]:arguments[0].indexOf(a)>=0?arguments[0]:arguments[0].indexOf("/")>0?a+arguments[0]:a+arguments[0]+"/Index";break;case 2:b=a+arguments[0]+"/"+arguments[1]}return jCom.log(b),b}}(),jCom.log=function(){},jCom.info=function(){},jCom.warn=function(){},jCom.trace=function(){},jCom.addQryString=function(a){a=jCom.urlPath(a);var b,c;if(a+=a.indexOf("?")===-1?"?":"&",c=arguments.length,2===c)return a+arguments[1];for(b=1;b<c;b++)a+=encodeURIComponent(arguments[b])+"="+encodeURIComponent(arguments[b+1])+"&",b++;return a.slice(0,a.length-1)},jCom.jQ=function(a){return"object"===Object.prototype.toString.call(a).match(/\[object (\w+)\]/i)[1].toLowerCase()?a:$("#"+a)},jCom.jepunCtrl=function(a){var b=jCom.jQ(a);if(b.attr("data-jepun-control"))return b[b.attr("data-jepun-control")]("instance");throw new Error("'data-jepun-control' is undefined!!")},jCom.excCallBack=function(cmds){var jQ,fun;if(cmds.customHandleError===!0)return void(window.location=cmds.loginUrl);try{for(var i=0;i<cmds.length;i++)switch(jQ=$(cmds[i].selectors),cmds[i].valType){case"String":jQ[cmds[i].cmd](cmds[i].arg0);break;case"Number":jQ[cmds[i].cmd](parseInt(cmds[i].arg0));break;case"Array":case"Function":eval("fun ="+cmds[i].arg0),jQ[cmds[i].cmd](fun);break;case"PlainObject":jQ[cmds[i].cmd]($.parseJSON(cmds[i].arg0));break;case"Empty":jQ[cmds[i].cmd]();break;case"StringAndString":jQ[cmds[i].cmd](cmds[i].arg0,cmds[i].arg1);break;case"StringAndNumber":jQ[cmds[i].cmd](cmds[i].arg0,parseInt(cmds[i].arg1));break;case"StringAndArray":case"StringAndPlainObject":jQ[cmds[i].cmd](cmds[i].arg0,$.parseJSON(cmds[i].arg1));break;case"StringAndFunction":eval("fun ="+cmds[i].arg1),jQ[cmds[i].cmd](cmds[i].arg0,fun);break;case"NumberAndFunction":eval("fun ="+cmds[i].arg1),jQ[cmds[i].cmd](parseInt(cmds[i].arg0),fun);break;case"StringAndStringAndFunction":eval("var fun ="+cmds[i].arg2),jQ[cmds[i].cmd](cmds[i].arg0,cmds[i].arg1,cmds[i].fun);break;case"MainAjaxLogin":window.location=cmds[i].arg1;break;case"AjaxLogin":window.top.document.all.DefLogout.click();break;case"Modal":jCom.Alert(cmds[i].arg1,cmds[i].arg0);break;case"Eval":eval(cmds[i].arg0);break;case"FireHandler":jCom.jepunCtrl(cmds[i].selectors).fireHandler($.extend({},$.parseJSON(cmds[i].arg1),{type:cmds[i].arg0}))}}catch(err){console.log(err)}},jCom.Alert=function(a,b,c){var d=GlbAlertModal;return d.off("hidden.bs.modal"),d.find(".modal-title").html(a),d.find(".modal-body").html(b),d.modal("show"),$.isFunction(c)&&d.on("hidden.bs.modal",function(a){c()}),d},jCom.xhr=function(a,b,c,d){a=jCom.urlPath(a);var e=jCore.createXHR();e.onreadystatechange=function(a){4===e.readyState&&(e.status>=200&&e.status<300||304===e.status?(jCom.excCallBack($.parseJSON(e.responseText)),$.isFunction(c)&&c(d)):console.error("Request was unsuccessful: "+e.status))},e.open("post",a,!0),e.send(b)},jCom.ajax=function(a,b,c){return a=jCom.urlPath(a),$.isPlainObject(b)&&delete b.target,$.ajax({url:a,data:b}).then(function(a){$.isFunction(c)&&c(a)})},jCom.dataBus=function(a,b,c,d){return a=jCom.urlPath(a),$.isPlainObject(b)&&delete b.target,$.ajax({url:a,data:b}).then(function(a){jCom.excCallBack(a),$.isFunction(c)&&c(d)})},jCom.target=function(a,b){a=jCom.urlPath(a);var c=$("#DefTargetForm");return c.attr("action",a),c.find("[name='DataString']").val(b),c.submit(),!1},jCom.loadPartialView=function(a,b,c,d,e){return a=jCom.urlPath(a),$.ajax({url:a,data:c,dataType:"html",type:"post"}).done(function(f){var g=[],h=jCom.jQ(b);h.empty(),h.append(f),h.find("form").each(function(){$(this).append($("<input type='hidden' name='formHolderId' />").val($(this).attr("id"))),g.push($(this).attr("id"))});var i=a.split("/");c.formHolderId=g.join(","),jCom.dataBus(i.slice(0,i.length-1).join("/")+"/Ini",c),delete c.__RequestVerificationToken,localArgs.removeAll().load(c),$.isFunction(d)&&d(e)})},jCom.getJSON=function(a,b,c,d){return $.ajax({url:a,data:b}).then(function(a){c(a),d&&"function"==typeof d&&d(a)})},jCom.getCacheJSON=function(a,b,c,d){var e=a+"?"+JSON.stringify(b);if(!GlbEnv.cache.hasItem(e))return $.ajax({url:a,data:b}).then(function(a){GlbEnv.cache.setItem(e,a),c(a),d&&"function"==typeof d&&d(a)});var f=GlbEnv.cache.getItem(e);!function(a){c(a),d&&"function"==typeof d&&d(a)}(f)},jCom.mashUp=function(a,b,c,d,e){if(b=jCom.urlPath(b),a&&GlbEnv.cache.removeItem(b),!GlbEnv.cache.hasItem(b))return $.ajax({url:b}).then(function(a){GlbEnv.cache.setItem(b,a),c(a[0]),jCom.excCallBack(a[1]),$.isFunction(d)&&d(e)});var f=GlbEnv.cache.getItem(b);c(f[0]),jCom.excCallBack(f[1]),d&&"function"==typeof d&&d(e)},jCom.createAppMsg=function(a){var b={Type:"",AutoOpen:!1,SendTime:null,AssemblyName:"",ClassName:"",FormName:"",From:"",To:"All",Body:"",ParameterData:{Arg0:"000",Arg1:"111",Arg2:"000",Arg3:"111",MenuNo:0,parentId:"",depth:0,Breadcrumb:"openWindow"}};return $.isPlainObject(a)&&(b.ParameterData=a),b},jCom.MsgQueue=function(a){return this instanceof jCom.MsgQueue?void(this.name=a):new jCom.MsgQueue(a)},jCom.MsgQueue.prototype={constructor:jCom.MsgQueue,enqueue:function(a){var b=GlbEnv.storage.get(this.name);b.push(a),GlbEnv.storage.set(this.name,b)},dequeue:function(){var a=GlbEnv.storage.get(this.name),b=a.shift();return GlbEnv.storage.set(this.name,a),b},peek:function(){var a=GlbEnv.storage.get(this.name);return a[a.length]},getAll:function(){return GlbEnv.storage.get(this.name)},remove:function(a){var b=GlbEnv.storage.get(this.name);b.splice(a,1),GlbEnv.storage.set(this.name,b)},destory:function(){GlbEnv.storage.remove(this.name)},clear:function(){GlbEnv.storage.set(this.name,[])}},jCom.MsgStack=function(a){return this instanceof jCom.MsgStack?(this.name=a,void(GlbEnv.storage.isEmpty(a)&&GlbEnv.storage.set(a,[]))):new jCom.MsgStack(a)},jCom.MsgStack.prototype={constructor:jCom.MsgStack,push:function(a){var b=GlbEnv.storage.get(this.name);GlbEnv.storage.unshift(a),GlbEnv.storage.set(this.name,b)},pop:function(){var a=GlbEnv.storage.get(this.name),b=a[0];return a.splice(0,1),GlbEnv.storage.set(this.name,a),b},peek:function(){return GlbEnv.storage.get(this.name)[0]},getAll:function(){return GlbEnv.storage.get(this.name)},remove:function(a){var b=GlbEnv.storage.get(this.name);b.splice(a,1),GlbEnv.storage.set(this.name,b)},destory:function(){GlbEnv.storage.remove(this.name)},clear:function(){GlbEnv.storage.set(this.name,[])}},jCom.Env=function(){function a(a){return f=!!$.isPlainObject(a)&&(a.isLogin||!1),this instanceof jCom.Env?(this.cache=c,this.args=d,this.storage=e.localStorage,b=$("#"+a.formId+" input[name='__RequestVerificationToken']").val(),void 0):new jCom.Env}var b,c=new jCore.Cache,d=new jCore.DynamicObj((!0)),e=$.initNamespaceStorage("JepunStorage"),f=!1;return a.prototype={constructor:a,path:function(){return jCom.urlPath.apply(null,arguments)},isLogin:function(){return f},token:function(){return b},isInRole:function(a){if(this.args.role)for(var b=this.args.role.split(","),c=0,d=b.length;c<d;c++)if(b[c]===a)return!0;return!1},isLikeRole:function(a){if(this.args.role)for(var b=this.args.role.split(","),c=0,d=b.length;c<d;c++)if(b[c].indexOf(a)!==-1)return!0;return!1}},a}();var localArgs=new jCore.DynamicObj;$.ajaxSetup({type:"POST",dataType:"json",cache:!1});var jFun;if(jFun&&("object"!=typeof jFun||jFun.name))throw new Error("Namespace 'jFun' already exists");jFun={},jFun.name="jFun",jFun.version=1,jFun.toFullChar=function(a){var b=[],c="";try{if(a.length>0)for(var d=0;d<a.length;d++){var e=a.charCodeAt(d);33<=e&&e<=126?b[d]=a.charCodeAt(d)+65248:32===e?b[d]=12288:b[d]=a.charCodeAt(d),c+=String.fromCharCode(b[d])}}catch(f){return a}return c},jFun.htmlEscape=function(a){return a.replace(/[<>"&]/g,function(a,b,c){switch(a){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case'"':return"&quot;"}})},jFun.getScrollTop=function(){return"undefined"!=typeof window.pageYOffset?window.pageYOffset:"undefined"!=typeof document.compatMode&&"BackCompat"!==document.compatMode?document.documentElement.scrollTop:"undefined"!=typeof document.body?document.body.scrollTop:0},jFun.getPageSize=function(){var a,b;window.innerHeight&&window.scrollMaxY?(a=window.innerWidth+window.scrollMaxX,b=window.innerHeight+window.scrollMaxY):document.body.scrollHeight>document.body.offsetHeight?(a=document.body.scrollWidth,b=document.body.scrollHeight):(a=document.body.offsetWidth,b=document.body.offsetHeight);var c,d;window.innerHeight?(c=document.documentElement.clientWidth?document.documentElement.clientWidth:window.innerWidth,d=window.innerHeight):document.documentElement&&document.documentElement.clientHeight?(c=document.documentElement.clientWidth,d=document.documentElement.clientHeight):document.body&&(c=document.body.clientWidth,d=document.body.clientHeight);var e,f;return f=b<d?d:b,e=a<c?a:c,{PageWidth:e,PageHeight:f,WindowWidth:c,WindowHeight:d}},jFun.getServiceUrl=function(a,b){return $.extend({url:jCom.urlPath(a)},b)},jFun.getOptionsUrl=function(a,b,c,d,e){var f=jCom.urlPath("Common","GetOptions");return{url:f,type:b?b:1,queryKey:a,code:c?c:"0",showPleaseSelect:d!==!1,placeholder:e?e:""}},jFun.getMergeOptions=function(a,b,c,d,e,f){var g=jCom.urlPath("Common","GetMergeOptions");return{url:g,type:b?b:1,queryKey:a,code:c?c:"0",showPleaseSelect:d!==!1,parent:e?e:"0",keepVals:f?f:""}},jFun.getTaOptionsUrl=function(a,b,c,d){var e=jCom.urlPath("Common","GetTaOptions");return{url:e,type:b?b:1,queryKey:a,code:c?c:"0",showPleaseSelect:d!==!1}},jFun.getTaOptionsOutUrl=function(a){var b=jCom.urlPath("Common","GetTaOptionsOut");return{url:b,type:a?a:1}},jFun.getTaCurForPsT2=function(a){var b=jCom.urlPath("Common","GetTaCurForPsT2");return{url:b,showPleaseSelect:a!==!1}},jFun.getEcZipCodeUrl=function(a,b,c){var d=jCom.urlPath("Common","GetEcZipCode");return{url:d,type:a?a:1,CityCode:b?b:"0",showPleaseSelect:c!==!1}},jFun.getTaFunctionUrl=function(a,b,c,d){var e=jCom.urlPath("Common",a);return{url:e,type:b?b:1,showPleaseSelect:c!==!1,placeholder:d?d:""}},jFun.getGetExpAccSellOptionsUrl=function(a,b){var c=jCom.urlPath("Common","GetExpAccSellOptions");return{url:c,CUR:a?a:"",showPleaseSelect:b!==!1}},jFun.getGetExpBankSellOptionsUrl=function(a,b,c,d){var e=jCom.urlPath("Common","GetExpBankSellOptions");return{url:e,type:a?a:1,FID:b?b:"0",CID:c?c:"01",showPleaseSelect:d!==!1}},jFun.getTaBankInfoUrl=function(a,b,c){var d=jCom.urlPath("Common","GetTaBankInfo");return{url:d,type:a?a:1,code:b?b:"0",showPleaseSelect:c!==!1}},jFun.getProductFundOptionsT3=function(a){var b=jCom.urlPath("Common","GetProductFundOptionsT3");return{url:b,showPleaseSelect:a!==!1}},jFun.getPsProductFundOnlineT3=function(a){var b=jCom.urlPath("Common","GetPsProductFundOnlineT3");return{url:b,showPleaseSelect:a!==!1}},jFun.getPsProductFundOnlineT6=function(a){var b=jCom.urlPath("Common","GetPsProductFundOnlineT6");return{url:b,showPleaseSelect:a!==!1}},jFun.getPsProductFundOnlineT61=function(a){var b=jCom.urlPath("Common","GetPsProductFundOnlineT61");return{url:b,showPleaseSelect:a!==!1}},jFun.getProductOutSideOptionsT3=function(a){var b=jCom.urlPath("Common","GetProductOutSideOptionsT3");return{url:b,showPleaseSelect:a!==!1}},jFun.getProductOutSideOptionsT4=function(a,b){var c=jCom.urlPath("Common","GetProductOutSideOptionsT4");return{url:c,aid:a?a:"MA001",showPleaseSelect:b!==!1}},jFun.getFundBasicOptionsUrl=function(a,b,c,d,e,f){var g=jCom.urlPath("Common","GetFundBasicOptions");return{url:g,style:e?e:"1",culture:d?d:2,type:a?a:9,risk:b?b:"1",riskLv:c?c:"1",showPleaseSelect:f!==!1}},jFun.getFundBasicOptionsUrlOut=function(a,b,c,d,e,f,g){var h=jCom.urlPath("Common","GetFundBasicOptionsOut");return{url:h,aid:b?b:"",style:f?f:"1",culture:e?e:2,type:a?a:9,risk:c?c:"1",riskLv:d?d:"1",showPleaseSelect:g!==!1}},jFun.getFundBasicOptions2UrlOut=function(a,b,c,d,e){var f=jCom.urlPath("Common","GetFundBasicOptionsOut2");return{url:f,aid:b?b:"",cid:c?c:"",fid:d?d:"",type:a?a:22,showPleaseSelect:e===!0}},jFun.getFundCompanyOptionsUrlOut=function(a,b,c){var d=jCom.urlPath("Common","GetFundCompanyOptionsOut");return{url:d,aid:b?b:"",type:a?a:1,showPleaseSelect:c!==!1}},jFun.getFundCompanyOptionsUrlTOut=function(a,b,c){var d=jCom.urlPath("Common","GetFundCompanyOptionsTOut");return{url:d,ano:b?b:"",type:a?a:1,showPleaseSelect:c!==!1}},jFun.getFundBasicTransferOptionsUrl=function(a,b,c){var d=jCom.urlPath("Common","GetFundBasicTransferOptions");return{url:d,CID:a,FID:b,showPleaseSelect:c!==!1}},jFun.getExpBankBuyOptionsUrl=function(a,b){var c=jCom.urlPath("Common","GetExpBankBuyOptions");return{url:c,EC_NO:a?a:0,showPleaseSelect:b!==!1}},jFun.getFundFeeUrl=function(a,b,c,d,e){var f=jCom.urlPath("Common","GetFundFee");return{url:f,type:a?a:1,CID:b?b:"01",FID:c?c:"0",AMT:d?d:0,BANKNO:e?e:""}},jFun.getPsProductOutSideOnlineT2=function(a,b){var c=jCom.urlPath("Common","GetPsProductOutSideOnlineT2");return{url:c,Agent:a?a:"",showPleaseSelect:b!==!1}},jFun.getActiveRateOptionsUrl=function(a,b,c,d,e,f){var g=jCom.urlPath("Common","GetActiveRateOptions");return{url:g,type:a?a:1,CID:b?b:"01",FID:c?c:"0",AMT:e?e:0,BANKNO:d?d:"",showPleaseSelect:f!==!1}},jFun.getActiveRateOptionsUrlOut=function(a,b,c,d,e,f,g){var h=jCom.urlPath("Common","GetActiveRateOptionsOut");return{url:h,type:a?a:1,CID:b?b:"00",FID:c?c:"0",AID:d?d:"0",AMT:f?f:0,CUR:e?e:"",showPleaseSelect:g!==!1}},jFun.addZero=function(a){return a<10&&(a="0"+a),a},jFun.getTime=function(a){var b;return b=0===arguments.length?new Date:a instanceof Date?a:new Date(a),jFun.addZero(b.getHours())+":"+jFun.addZero(b.getMinutes())+":"+jFun.addZero(b.getSeconds())},jFun.getFullDate=function(a,b){var c;return b=jFun.client.isMobile?b?b:"-":b?b:"/",c=0===arguments.length?new Date:a instanceof Date?a:new Date(a),c.getFullYear()+b+jFun.addZero(c.getMonth()+1)+b+jFun.addZero(c.getDate())},jFun.getDateTime=function(a){var b;return b=0===arguments.length?new Date:a instanceof Date?a:new Date(a),jFun.getFullDate(b,"/")+" "+jFun.getTime(b)},jFun.toFixed=function(a,b){return parseFloat(a).toFixed(b)},jFun.addCommas=function(a){var b;b=a.toString()+"";for(var c=b.split("."),d=c[0],e=c.length>1?"."+c[1]:"",f=/(\d+)(\d{3})/;f.test(d);)d=d.replace(f,"$1,$2");return d+e},jFun.CommasToNum=function(a){return a=a.toString(),a.replace(/,/g,"")},jFun.toFormat=function(a,b,c){var d=new RegExp("\\d+","g"),e=d.exec(b);switch(null!==e?(c=e[0],b=b.replace(new RegExp(c,"g"),"")):c=void 0!==c?c:2,b){case".":return jFun.toFixed(a,c);case",.":return jFun.addCommas(jFun.toFixed(a,c));case",":return jFun.addCommas(a);case"%":return(100*parseFloat(a)).toFixed(c)+"%";case"yyyy/mm/dd":return jFun.getFullDate(a,"/");case"yyyy-mm-dd":return jFun.getFullDate(a);case"num":return jFun.CommasToNum(a);default:return jFun.addCommas(jFun.toFixed(a,c))}},jFun.duffDevice=function(a,b){var c=a.length%8;try{for(;c;)b(a[c--]);for(c=Math.floor(a.length/8);c;)b(a[c--]),b(a[c--]),b(a[c--]),b(a[c--]),b(a[c--]),b(a[c--]),b(a[c--]),b(a[c--])}catch(d){console.error(d)}},jFun.geolocation=function(a){var b={timeout:1e4};navigator.geolocation?navigator.geolocation.getCurrentPosition(function(b){a(b.coords.latitude,b.coords.longitude)},function(b){a(0,0),console.error("Error code: "+b.code),console.error("Error message: "+b.message)},b):(a(0,0),console.error("not supported geolocation!!"))},jFun.client=function(){var a={ie:0,gecko:0,webkit:0,khtml:0,opera:0,ver:null},b={ie:0,firefox:0,safari:0,konq:0,opera:0,edge:0,chrome:0,ver:null},c={win:!1,mac:!1,x11:!1,iphone:!1,ipod:!1,ipad:!1,ios:!1,android:!1,nokiaN:!1,winMobile:!1,wii:!1,ps:!1},d=navigator.userAgent;if(console.info(d),window.opera)a.ver=b.ver=window.opera.version(),a.opera=b.opera=parseFloat(a.ver);else if(/AppleWebKit\/(\S+)/.test(d))if(a.ver=RegExp.$1,a.webkit=parseFloat(a.ver),/Edge\/(\S+)/.test(d))b.ver=RegExp.$1,b.edge=parseFloat(b.ver);else if(/Chrome\/(\S+)/.test(d))b.ver=RegExp.$1,b.chrome=parseFloat(b.ver);else if(/Version\/(\S+)/.test(d))b.ver=RegExp.$1,b.safari=parseFloat(b.ver);else{var e=1;e=a.webkit<100?1:a.webkit<312?1.2:a.webkit<412?1.3:2,b.safari=b.ver=e}else/KHTML\/(\S+)/.test(d)||/Konqueror\/([^;]+)/.test(d)?(a.ver=b.ver=RegExp.$1,a.khtml=b.konq=parseFloat(a.ver)):/rv:([^\)]+)\) Gecko\/\d{8}/.test(d)?(a.ver=RegExp.$1,a.gecko=parseFloat(a.ver),/Firefox\/(\S+)/.test(d)&&(b.ver=RegExp.$1,b.firefox=parseFloat(b.ver))):/rv:([^\)]+)\) like Gecko/.test(d)?(a.ver=b.ver=RegExp.$1,a.ie=b.ie=parseFloat(a.ver)):/MSIE ([^;]+)/.test(d)&&(a.ver=b.ver=RegExp.$1,a.ie=b.ie=parseFloat(a.ver));b.ie=a.ie,b.opera=a.opera;var f=navigator.platform;if(c.win=0===f.indexOf("Win"),c.mac=0===f.indexOf("Mac"),c.x11="X11"===f||0===f.indexOf("Linux"),c.win&&/Win(?:dows )?([^do]{2})\s?(\d+\.\d+)?/.test(d))if("NT"===RegExp.$1)switch(RegExp.$2){case"5.0":c.win="2000";break;case"5.1":c.win="XP";break;case"6.0":c.win="Vista";break;case"6.1":c.win="7";break;case"10.0":c.win="10";break;default:console.info("NT:"+RegExp.$2),c.win="NT"}else"9x"===RegExp.$1?c.win="ME":c.win=RegExp.$1;return c.iphone=d.indexOf("iPhone")>-1,c.ipod=d.indexOf("iPod")>-1,c.ipad=d.indexOf("iPad")>-1,c.nokiaN=d.indexOf("NokiaN")>-1,c.winMobile="CE"===c.win,c.mac&&d.indexOf("Mobile")>-1&&(/CPU (?:iPhone )?OS (\d+_\d+)/.test(d)?c.ios=parseFloat(RegExp.$1.replace("_",".")):c.ios=2),/Android (\d+\.\d+)/.test(d)&&(c.android=parseFloat(RegExp.$1)),c.wii=d.indexOf("Wii")>-1,c.ps=/playstation/i.test(d),{engine:a,browser:b,system:c,isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}}(),jFun.clientInfo=function(){var a,b,c,d;return $.each(jFun.client.browser,function(b,c){0!==c&&"ver"!==b&&(a=b)}),$.each(jFun.client.engine,function(a,c){0!==c&&"ver"!==a&&(b=a)}),$.each(jFun.client.system,function(a,b){b!==!1&&(c=a,d=b)}),{Browser:a,BrowserVer:jFun.client.browser.ver,Engine:b,EngineVer:jFun.client.engine.ver,Sys:c,SysVer:d,Latitude:0,Longitude:0}}(),jFun.realAge=function(a,b,c){var d=new Date,e=d.getFullYear(),f=d.getMonth()+1,g=d.getDate(),h=12*parseInt(e)+parseInt(f)-(12*parseInt(a)+parseInt(b))-(parseInt(g)>=parseInt(c)?0:1);return parseInt(h/12)},jFun.MergerObj=function(a,b){for(var c in b)a[c]=b[c];return a},jFun.ConvertBool=function(a){switch("string"==typeof a&&(a=a.toLowerCase()),a){case!0:case"true":case 1:case"1":case"on":case"yes":return!0;default:return!1}},jFun.add0=function(a){return a<10?"0"+a:a},$.fn.copyVal=function(a,b){var c=$(this),d=c.getCtrl(a),e=c.getCtrl(b);switch(d.attr("type")){case"radio":case"checkbox":e.each(function(){$(this)[0].checked=!1}),d.find(":checked").each(function(){e.find("[value='"+$(this).val()+"']")[0].checked=!0});break;case"email":case"tel":case"datetime-local":case"datetime":case"time":case"date":case"text":e.val(d.val());break;default:if(d.is("select")){e.empty();var f="";d.find("option").each(function(){f+="<option value='"+this.value+"'>"+this.text+"</option>"}),e.append(f),e.val(d.val())}else e.val(d.val())}},$.fn.addSelect=function(a,b,c){var d=$(this),e=b.propValName||"Code",f=b.propTexName||"Name",g=function(b){var g="";$.each(b,function(a,b){g+="<option value='"+b[e]+"'>"+b[f]+"</option>"});var h=d.getCtrl(a);c||h.empty(),h.append(g)},h=$.extend({},b,{__RequestVerificationToken:GlbEnv.token()});return delete h.url,b.reload===!0?jCom.getJSON(b.url,h,g):jCom.getCacheJSON(b.url,h,g)},$.fn.filterSelect=function(a,b){var c,d,e=$(this),f=a.split(","),g="";return e.find("option").each(function(){if(b)for(c=0,d=f.length;c<d;c++)f[c]!==this.value&&(g+="<option value='"+this.value+"'>"+this.text+"</option>");else for(c=0,d=f.length;c<d;c++)f[c]===this.value&&(g+="<option value='"+this.value+"'>"+this.text+"</option>")}),e.empty(),e.append(g),this},$.fn.formToJSON=function(a,b){var c=$(this);b=!!b;var d={};return $(c.serializeArray()).each(function(){this.value.length<=0&&b||(d[this.name]?d[this.name]=d[this.name]+"@@"+this.value:d[this.name]=this.value)}),delete d.__RequestVerificationToken,$.isPlainObject(a)?$.extend(a,d):d},$.fn.formBeforeJSON=function(a){var b=$(this),c={};return b.find("input").each(function(){c[this.name]=$(this).attr("data-jepun-field-holder")}),b.find("textarea").each(function(){c[this.name]=$(this).attr("data-jepun-field-holder")}),b.find("select").each(function(){c[this.name]=$(this).attr("data-jepun-field-holder")}),delete c.__RequestVerificationToken,$.isPlainObject(a)?$.extend(c,a):c},$.fn.formToText=function(a){var b=$(this),c={};return $(b.serializeArray()).each(function(){var a=b.getCtrl(this.name);switch(a.attr("type")){case"radio":var d=b.find("input[name='"+this.name+"'][value='"+this.value+"']");c[this.name]=$.trim(d.parent().text());break;case"checkbox":var e=b.find("input[name='"+this.name+"'][value='"+this.value+"']");c[this.name]?c[this.name]=c[this.name]+" "+$.trim(e.parent().text()):c[this.name]=$.trim(e.parent().text());break;case"email":case"tel":case"datetime-local":case"datetime":case"time":case"date":case"text":c[this.name]=$.trim(this.value);break;default:if(a.is("select")){if("-1"!==this.value){var f=a.find("option[value='"+this.value+"']");c[this.name]?c[this.name]=c[this.name]+" "+$.trim(f.text()):c[this.name]=$.trim(f.text())}}else c[this.name]=$.trim(this.value)}}),$.isPlainObject(a)?$.extend(c,a):c},$.fn.formInject=function(a,b){var c=$(this);return b=!!b,$.each(a,function(a,d){var e=c.getCtrl(a);if(0===e.length&&(e=$("<input type='hidden' name='"+a+"' />").appendTo(c)),e.attr("data-jepun-field-holder",d),b)return void(e.is("input")||e.is("select")||e.is("textarea")||e.html(d));switch(e.attr("type")){case"radio":var f=c.find("input[name='"+a+"'][value='"+d+"']");f.length>0&&(f[0].checked=!0);break;case"checkbox":var g=d.toString().split("@@");for(var h in g)$("input[name="+a+"][value="+g[h]+"]").attr("checked",!0);break;case"datetime-local":e.val(new Date(d).toDateTimeLocal());break;case"datetime":e.val(jFun.getDateTime(new Date(d)));break;case"time":e.val(jFun.getTime(new Date(d)));break;case"date":d.length>0?e.val(jFun.getFullDate(new Date(d))):e.val(d);break;default:e.is("input")||e.is("select")||e.is("textarea")?e.val(d):e.html(d)}}),this},$.fn.formInjectText=function(a){var b=$(this);return $.each(a,function(a,c){b.getCtrl(a).html(c)}),this},$.fn.tmpInject=function(a,b,c,d){d=d?d:50;var e,f=$(this),g="";$.isFunction(b)||(b=function(){}),$.isFunction(c)||(c=function(){}),e=$(this).getCtrl("tmp").html();for(var h=0,i=a.length;h<i;h++){var j=e;j=j.replace(/\"/g,"'"),$.each(a[h],function(a,b){var c=new RegExp("{"+a+":(.*?)}","g"),d=c.exec(j);if(null!==d){var e=d[0].substring(d[0].indexOf(":")+1,d[0].indexOf("}")),f=jFun.toFormat(b,e);j=j.replace(new RegExp(d[0],"g"),f)}j=j.replace(new RegExp("{"+a+"}","g"),b)}),j=j.replace(new RegExp("{key}","g"),h+1),g+=j,(h+1)%d===0&&($(g).iniView(b).appendTo(f),g="")}return $(g).iniView(b).appendTo(f),f.iniView(c),this},$.fn.getVal=function(a){var b=$(this),c=b.find("[name='"+a+"']");switch(c.attr("type")){case"radio":return b.find("input:checked[name='"+a+"']").val();case"checkbox":return c[0].checked;default:return c.val()}},$.fn.setVal=function(a,b){if(void 0!==b){var c,d,e=$(this),f=a.split(",");for(c=0,d=f.length;c<d;c++){var g=e.find("[name='"+f[c]+"']");switch(g.attr("type")){case"radio":var h=e.find("input[name='"+a+"'][value='"+b+"']");h.length>0&&(h[0].checked=!0);break;case"checkbox":g[0].checked=b;break;default:g.val(b);
}}}},$.fn.setHtml=function(a,b){if(void 0!==b){var c=$(this),d=c.find("[name='"+a+"']");return d.html(b)}},$.fn.setAction=function(){var a=$(this);return a.attr("action",jCom.urlPath.apply(null,arguments)),this},$.fn.formAjax=function(a){var b=$(this);return 0===b.find("input[name='__RequestVerificationToken']").length&&b.append($("<input type='hidden' name='__RequestVerificationToken' />").val(GlbEnv.token())),jCom.ajax(b.attr("action"),b.serialize(),a)},$.fn.callAjax=function(a,b,c){var d=$(this);return jCom.ajax(a,$.extend({},b,{__RequestVerificationToken:GlbEnv.token(),formHolderId:d.attr("id")}),c)},$.fn.formDataBus=function(a,b){var c=$(this);return 0===c.find("input[name='__RequestVerificationToken']").length&&c.append($("<input type='hidden' name='__RequestVerificationToken' />").val(GlbEnv.token())),jCom.dataBus(c.attr("action"),c.serialize(),a,b)},$.fn.formXhrDataBus=function(a,b,c){var d=$(this);0===d.find("input[name='__RequestVerificationToken']").length&&d.append($("<input type='hidden' name='__RequestVerificationToken' />").val(GlbEnv.token())),jCom.xhr(a,new FormData(document.getElementById(d.attr("id"))),b,c)},$.fn.formTarget=function(a,b){var c=$(this);0===c.find("input[name='__RequestVerificationToken']").length&&c.append($("<input type='hidden' name='__RequestVerificationToken' />").val(GlbEnv.token())),jCom.target(a,b)},$.fn.callDataBus=function(a,b,c,d){var e=$(this);return jCom.dataBus(a,$.extend({},b,{__RequestVerificationToken:GlbEnv.token(),formHolderId:e.attr("id")}),c,d)},$.fn.getCtrl=function(a,b){var c,d,e=b?b:"name",f=a.split(","),g="";for(c=0,d=f.length;c<d;c++)g+="["+e+" = '"+f[c]+"'],";return $(this).find(g.substring(0,g.length-1))},$.fn.disabled=function(){return $(this).is("input,select,fieldset")?$(this).attr("disabled","disabled"):$(this).is("button")&&$(this).attr("disabled","disabled"),$(this)},$.fn.enabled=function(){return $(this).is("input,select,fieldset")?$(this).removeAttr("disabled"):$(this).is("button")&&$(this).removeAttr("disabled"),$(this)},$.fn.getKeyVal=function(a){for(var b=$(this),c=a?a:"data-jepun-key",d=b.attr(c);!d&&(b=b.parent(),d=b.attr(c),"FORM"!==b.prop("tagName")););return d},$.fn.getForm=function(){var a=$(this);if("FORM"===a.prop("tagName"))return a;for(;;)if(a=a.parent(),"FORM"===a.prop("tagName"))return a},$.fn.iniView=function(a){for(var b=$(this),c=0;c<arguments.length;c++)$.isFunction(arguments[c])&&arguments[c](b);return this},$.fn.fireHandler=function(a){var b=$(this);return jCom.jepunCtrl(b).fireHandler(a),this},$.fn.addHandler=function(a,b,c){var d=$(this);return jCom.jepunCtrl(d).addHandler(a,b,c),this},$.fn.removeHandler=function(a,b){var c=$(this);return jCom.jepunCtrl(c).removeHandler(a,b),this},$.fn.openModal=function(a,b,c,d){var e=$(this);e.find(".modal-content");if(!e.hasClass("in")){var f=window.location.hash.replace(/#/,"").replace(/{/,"").replace(/}/,"");e.attr("data-jepun-oldhash","{"+f+"}")}return e.off("hidden.bs.modal"),e.find(".modal-title").html(a),c=$.extend({},c,{__RequestVerificationToken:GlbEnv.token()}),jCom.loadPartialView(b,e.find(".modal-body"),c,function(){e.validParse(),window.location.hash="{"+b+"}",e.modal("show")}),e.on("hidden.bs.modal",function(a){a.preventDefault();var b=$(this).attr("data-jepun-oldhash");window.location.hash=b}),$.isFunction(d)&&e.on("hidden.bs.modal",function(a){d(c)}),e.scrollTop(0),this},$.fn.hideModelClose=function(){var a=$(this);a.find(".modal-header").find(".close").hide(),a.find(".modal-footer").hide()},$.fn.showModelClose=function(){var a=$(this);a.find(".modal-header").find(".close").show(),a.find(".modal-footer").show()},$.fn.resetValidation=function(a){var b=$(this),c=b.getCtrl(a);c.removeClass("input-validation-error").removeClass("valid").addClass("valid");var d=b.getCtrl(c.attr("name"),"data-valmsg-for");d.removeClass("field-validation-error").removeClass("field-validation-valid").addClass("field-validation-valid")},$.fn.validationError=function(a,b){var c=$(this),d=c.getCtrl(a);d.removeClass("input-validation-error").removeClass("valid").addClass("input-validation-error");var e=c.getCtrl(d.attr("name"),"data-valmsg-for");e.removeClass("field-validation-error").removeClass("field-validation-valid").addClass("field-validation-error").html("<span>"+b+"</span>")},$.fn.validParse=function(){return $.validator.unobtrusive.parse($(this)),this},$.fn.isMethodValid=function(a){var b=!0,c=$(this),d=a.split(",");return c.find(".input-validation-error").each(function(){for(var a=$(this),e=0,f=d.length;e<f;e++)if(a.attr("data-val-"+d[e].toLowerCase())===c.find("#"+a.attr("aria-describedby")).text())return b=!1,!1}),b},$.fn.getInvalid=function(a){var b={},c=$(this);return c.find(".input-validation-error").each(function(){var a=$(this);switch(a.attr("type")){case"radio":case"checkbox":b[a.attr("name")]=a[0].checked;break;default:b[a.attr("name")]=a.val()}}),$.isArray(a)&&a.forEach(function(a,c,d){delete b[a]}),b},$.fn.loopValid=function(a){var b=$(this),c=!0,d=[];return $.isArray(a)&&(d=a),b.find(".input-validation-error").each(function(){if(d.indexOf($(this).attr("name"))===-1)return $(this).focus(),c=!1,!1}),c},$.fn.firstValid=function(a){var b=$(this),c=!0,d=[];$.isArray(a)&&(d=a);var e=b.getCtrl("true","data-val");return $.each(e,function(){if(d.indexOf($(this).attr("name"))===-1&&!$(this).valid())return $(this).focus(),c=!1,!1}),c},$.fn.loadPartialView=function(a,b){var c=$(this);return b=$.extend({},b,{__RequestVerificationToken:GlbEnv.token()}),jCom.loadPartialView(a,c,b,function(){$.validator.unobtrusive.parse(c),window.location=window.location.toString().split("#")[0]+"#"+a,$(window).scrollTop(0)})},$.fn.decimalPlaces=function(a){var b=$(this),c=function(){return 0};$.isFunction(a)&&(c=a);var d=function(a){var b=parseFloat(a.replace(/,/g,""));if(isNaN(b))return"";switch(parseFloat(c())){case 1:return Math.floor(10*b)/10;case 2:return Math.floor(100*b)/100;case 3:return Math.floor(1e3*b)/1e3;default:return Math.floor(b)}};return b.on("blur",function(){$(this).val(d($(this).val()))}),b.on("keyup",function(){$(this).val($(this).val().replace(/,/g,""));var a=$(this).val().split(".");2===a.length&&a[1].length>c()&&$(this).val(d($(this).val()))}),this},$.fn.linkActive=function(){var a=$(this);return a.on("click",function(){$(this).parents(".collapse").find(".active").removeClass("active"),$(this).parent().addClass("active")}),this},$.fn.setActive=function(){var a=$(this);return a.parents(".collapse").find(".active").removeClass("active"),a.parent().addClass("active"),this},$.fn.tabActive=function(){var a=$(this);return a.parent().parent().find(".active").removeClass("active"),a.parent().addClass("active"),this},$.fn.listMenu=function(a){var b=$(this);return b.find(".active").on("click",function(b){b.preventDefault(),$(this).parent().children(":gt(0)").toggle(),$.isFunction(a)&&a()}),this},$.fn.sortField=function(a,b){var c=$(this),d=c.parent().parent().parent().find("tbody");return c.append("<span class='caret'></span>"),c.on("click",function(){c.parent().find("th").removeClass("bg-info"),c.addClass("bg-info"),$(this).hasClass("dropup")?($(this).removeClass("dropup"),b.sort(jCore.createComparisonFunction(a))):($(this).addClass("dropup"),b.sort(jCore.createComparisonFunction(a,"desc")));for(var e=0;e<b.length;e++)d.getCtrl(b[e].key,"data-jepun-key").appendTo(d)}),this},$.fn.tableSortField=function(a,b,c,d){b=b?b:"s",c=void 0===c?a:c,d=void 0===d?0:d;var e,f=[],g=$(this),h=g.find("thead > tr > th").eq(a),i=g.find("tbody");switch(b.toLowerCase()){case"d":e=function(a){var b=Date.parse(a);return isNaN(b)?Date.parse("1911-01-01"):b};break;case"i":e=function(a){return""===a?0:parseInt(a.replace(/,/g,""))};break;case"f":e=function(a){return""===a?0:parseFloat(a.replace(/,/g,""))};break;case"%":e=function(a){return""===a?-1e4:parseFloat(a.replace(/%/g,""))};break;case"s":e=function(a){return a};break;default:e=function(a){return a}}return 0===h.find(".caret").length&&(h.find("footer").length>0?c!==a&&d>0&&h.find("footer").length>=d?$(h.find("footer")[d-1]).append("<span class='caret'></span>"):$("<span class='caret'></span>").insertBefore(h.find("footer")[0]):h.append("<span class='caret'></span>")),i.find("tr").each(function(a,b){f.push({key:$(b).attr("data-jepun-key"),val:e($($(b).children()[c]).text())})}),h.off(".sortTable"),h.on("click.sortTable",function(){h.parent().find("th").removeClass("bg-info"),h.addClass("bg-info"),$(this).hasClass("dropup")?($(this).removeClass("dropup"),f.sort(jCore.createComparisonFunction("val"))):($(this).addClass("dropup"),f.sort(jCore.createComparisonFunction("val","desc")));for(var a=0;a<f.length;a++)i.getCtrl(f[a].key,"data-jepun-key").appendTo(i)}),this},$.fn.addRule=function(a,b){var c=$(this);return c.addClass("valid"),c.attr("data-val",!0),c.attr("data-val-required",a),c.removeData("validator"),c},$.fn.removeRule=function(a){var b=$(this);return b.removeClass("input-validation-error"),b.removeAttr("data-val"),b.removeAttr("data-val-required"),b.removeAttr("aria-required"),b.removeData("validator"),b},$.fn.imagesLoaded=function(a){var b=this.filter("img"),c=b.length,d="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";return b.bind("load.imgloaded",function(){--c<=0&&this.src!==d&&(b.unbind("load.imgloaded"),a.call(b,this))}).each(function(){if(this.complete||void 0===this.complete){var a=this.src;this.src=d,this.src=a}}),this},$.fn.fixedHeader=function(a){return $(this).each(function(a,b){var c=$(this).parents(".fixedHeaderOuter");if(c.css({"padding-top":$(this).find("thead").outerHeight(!0)+"px"}),$(this).parents(".fixedHeaderInner").removeClass("customScroll").find(".scrollbar").remove(),c.find(".scrollDiv").css({width:"100%"}),c.find(".scrollContent").css({width:"100%"}),$(this).find("thead").outerHeight(!0)>0){$(this).find("thead").css({top:"-"+$(this).find("thead").outerHeight(!0)+"px"}),void 0===$(this).parents(".fixedHeaderInner").attr("id")&&$(this).parents(".fixedHeaderInner").attr("id","customScroll"+JepunScroll.__id++);new JepunScroll.CustomScroll("#"+$(this).parents(".fixedHeaderInner").attr("id"))}}),this},$.fn.rowCount=function(){return $("tr",$(this).find("tbody")).length},$.fn.fnPageination=function(a,b){var c,d=$(this);switch(d.prop("tagName")){case"TABLE":c=$("tr",d.find("tbody")),c.hide();break;case"UL":c=$("li",d),c.hide();break;case"DIV":c=$(".row",d),c.hide()}var e=c.toArray();a.pagination({dataSource:e,pageSize:b,ulClassName:"pagination",prevText:"上一頁",nextText:"下一頁",callback:function(a,b){c.hide(),a.forEach(function(a,b){$(a).show()})}})},$.fn.TrLunbo=function(a,b,c){var d=a?a:6,e=b?b:6e3,f=c?c:200,g=!1,h=function(a,b){var c=$(a);if(!g)for(var e=1;e<=b;e++){var h=c.find("tbody").find("tr:first").css("opacity","").hide(),i=h.clone();c.find("tbody").append(i),h.remove(),c.rowCount()>=b?c.find("tbody").find("tr:nth-child("+d+")").fadeIn(f):c.find("tbody").find("tr:last").css("opacity","").fadeIn(f)}};$(this).each(function(a,b){var c=$(this);c.on("mouseover",function(){g=!0}),c.on("mouseout",function(){g=!1}),c.find("tbody").find("tr").hide();for(var f=0;f<=d;f++)c.find("tbody").find("tr:nth-child("+f+")").fadeIn(200);c.rowCount()>=d&&setInterval(function(){h(c,d)},e)})},$.fn.calendar=function(a,b){function c(){var a=h.getYear()+"/"+h.getMonth()+"/01";d.getForm().callAjax("Home/GetTaSecCalendarT4",{date:a},function(a){g.empty();var b=Object.getOwnPropertyNames(a.data);b.forEach(function(b){g.append("<li>"+b+"："+a.data[b]+"</li>")}),h.setData(a.info)}),i.html(h.getMonthName()),j.html(h.getYear())}var d=$(this),e=d.parent().find("[name=custom-month]"),f=d.parent().find("[name=custom-year]"),g=d.parent().find("[name=calendarList]"),h=d.calendario({caldata:a}),i=e.html(h.getMonthName()),j=f.html(h.getYear());d.parent().find("[name=custom-next]").on("click",function(){h.gotoNextMonth(c)}),d.parent().find("[name=custom-prev]").on("click",function(){h.gotoPreviousMonth(c)}),d.parent().find("[name=custom-current]").on("click",function(){h.gotoNow(c)})},$.fn.readMore=function(){$(this).each(function(a,b){$(this).on("click",function(a){a.preventDefault();var b=$(this).parent().find(".article-content");$(this).hide(),b.css("display","block")})})},$.widget("jepun.createDialog",{options:{title:"",buttonSetNames:[],buttons:{},height:700,width:800,modal:!0,clearEvent:function(){},autoOpen:!1,resizable:!0,position:{my:"center",at:"center",of:window}},_create:function(){var a=this;a.element.attr("data-jepun-control","createDialog"),""!==a.options.title&&a.element.attr("title",a.options.title),a.dialog=a.element.dialog({autoOpen:a.options.autoOpen,height:a.options.height,width:a.options.width,modal:a.options.modal,buttons:a.options.buttons,resizable:a.options.resizable,resize:function(a,b){},open:function(a,b){},position:a.options.position,dialogClass:"jepun-ui-front"}),a.element.parent().find("button.ui-dialog-titlebar-close").attr("role","button").attr("title","Close").removeClass("ui-dialog-titlebar-close").append("<span class='ui-button-icon-primary ui-icon ui-icon-closethick'></span><span class='ui-button-text'>Close</span>").addClass("ui-button ui-widget ui-state-default ui-corner-all ui-button-icon-only ui-dialog-titlebar-close").on("click",function(){a.options.clearEvent()});for(var b=0;b<a.options.buttonSetNames.length;b++)a.element.parent().find("div.ui-dialog-buttonset > button:eq("+b+")").text(a.options.buttonSetNames[b]);a.element.css("overflow-y","hidden"),a.element.css("overflow-x","hidden")},_init:function(){},open:function(){var a=this;a.dialog.dialog("open")},hide:function(){var a=this;a.dialog.dialog("close")},close:function(){var a=this;a.dialog.dialog("close"),a.dialog.dialog("destroy").remove()},showButton:function(a){var b=this;b.element.parent().find("div.ui-dialog-buttonset > button:eq("+a+")").show()},hideButton:function(a){var b=this;b.element.parent().find("div.ui-dialog-buttonset > button:eq("+a+")").hide()},getId:function(){var a=this;return a.element.attr("id")}}),$.widget("jepun.watermark",{options:{imgX:30,imgY:5,imgHref:"../../Content/images/watermark.svg",imgWidth:120,imgHeight:120,logoText:"捷鵬國際",logoX:145,logoY:100,underText:"Know your needs",underX:100,underY:180,top:100,callBack:function(){}},_create:function(){var a,b=this,c=jFun.getPageSize().WindowWidth;a=c>736?1:c>414?.5:.3;var d=document.createElementNS("http://www.w3.org/2000/svg","svg");d.setAttributeNS(null,"class","jepun-watermark");var e=document.createElementNS("http://www.w3.org/2000/svg","image");e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",b.options.imgHref),e.setAttributeNS(null,"transform","rotate(30 20,40) scale("+a+","+a+")"),e.setAttributeNS(null,"x",b.options.imgX),e.setAttributeNS(null,"y",b.options.imgY),e.setAttributeNS(null,"width",b.options.imgWidth),e.setAttributeNS(null,"height",b.options.imgHeight),e.setAttributeNS(null,"class","jepun-watermark-logo-img"),d.appendChild(e);var f=document.createElementNS("http://www.w3.org/2000/svg","text");f.setAttributeNS(null,"transform","rotate(30 20,40) scale("+a+")"),f.setAttributeNS(null,"x",b.options.logoX),f.setAttributeNS(null,"y",b.options.logoY),f.setAttributeNS(null,"class","jepun-watermark-logo"),f.textContent=b.options.logoText,d.appendChild(f);var g=document.createElementNS("http://www.w3.org/2000/svg","text");g.setAttributeNS(null,"transform","rotate(30 20,40) scale("+a+")"),g.setAttributeNS(null,"x",b.options.underX),g.setAttributeNS(null,"y",b.options.underY),g.setAttributeNS(null,"class","jepun-watermark-under"),g.textContent=b.options.underText,d.appendChild(g),b.watermark=d,b.element.attr("data-jepun-control","watermark").append(d)},_init:function(){var a=this;switch(a.element.prop("tagName")){case"BODY":a._initBody();break;default:a._initModal()}},_initBody:function(){},_initModal:function(){}}),$.widget("jepun.goTop",{options:{bottom:35,right:10},_create:function(){var a=this;a.goTop=$("<div><span class='glyphicon glyphicon-chevron-up'></span></div>").attr("data-jepun-control","goTop").addClass("jepun-gotop").css("bottom",this.options.bottom).css("right",this.options.right),a.element.append(a.goTop)},_init:function(){var a=this;switch(a.element.prop("tagName")){case"BODY":a._initBody();break;default:a._initModal()}},_initBody:function(){var a=this;$(window).scroll(function(){0!==$(this).scrollTop()?a.goTop.fadeIn():a.goTop.fadeOut()}),a.goTop.click(function(){$("body,html").animate({scrollTop:0},1e3)})},_initModal:function(){var a=this;a.element.scroll(function(){0!==$(this).scrollTop()?a.goTop.fadeIn():a.goTop.fadeOut()}),a.goTop.click(function(){a.element.animate({scrollTop:0},1e3)})}}),$.widget("jepun.countDown",{options:{startFontSize:"36px",endFontSize:"12px",duration:1e3,startNumber:10,endNumber:0,callBack:function(){}},_create:function(){this.element.attr("data-jepun-control","countDown"),this.element.text(this.options.startNumber).css("fontSize",this.options.startFontSize)},_init:function(){var a=this;a.options.startNumber=a.options.startNumber-1,a.element.animate({fontSize:a.options.endFontSize},a.options.duration,"",function(){a.element.css("fontSize",a.options.startFontSize).text(a.options.startNumber),0===a.options.startNumber?a.options.callBack(a):a.element.countDown(this.options)})}}),$.widget("jepun.comm",{options:{},_create:function(){var a=this;a.eventTarget=new jCore.EventTarget(a.getId()),a.element.attr("data-jepun-control","comm")},_init:function(){},addHandler:function(a,b,c){var d=this;d.eventTarget.addHandler(a,b,c)},removeHandler:function(a,b){var c=this;c.eventTarget.removeHandler(a,b)},fireHandler:function(a){var b=this;b.eventTarget.fire(a)},getId:function(){var a=this;return a.element.attr("id")},_destroy:function(){var a=this;a.eventTarget=null}}),$.widget("jepun.combobox2",{options:{form:null,placeholder:"",callBack:function(){},showdropdown:!0,focushowlist:!0,emptySearch:!0},_create:function(){var a=this;a.element.attr("id")||a.element.attr("id",a.getName()),a.element.attr("data-jepun-control","combobox2"),a.options.showdropdown?a.input=$("<input type='text' placeholder='"+a.options.placeholder+"' class='form-control input-sm' autocomplete='off'><a class='dropdown-toggle input-group-addon input-group-rwd comboboxbtn' data-toggle='dropdown'><span class='caret'></span></a><ul class='dropdown-menu'></ul></div>"):a.input=$("<input type='text' placeholder='"+a.options.placeholder+"' class='form-control input-sm' autocomplete='off'><a class='jepunhidden dropdown-toggle input-group-addon input-group-rwd comboboxbtn' data-toggle='dropdown'><span class='caret'></span></a><ul class='dropdown-menu'></ul></div>"),a.input.insertAfter(a.element),a.button=a.input[1],a.dropdownMenu=a.input[2]},_init:function(){var a=this,b=this.element.children(":selected"),c=b.val()?b.text():"";$(a.input).val(c),$(a.button).dropdown("toggle"),$(a.button).dropdown("toggle"),$(a.element)[0].selectedIndex===-1&&$(a.element).val($(a.element).attr("data-jepun-field-holder"));var d=function(b){b.preventDefault();var c=a.input.val();9!==b.keyCode&&($(a.element)[0].selectedIndex=0),a.options.form&&a.options.form.fireHandler({type:"ChangeDataCheck"}),a.refresh(c)&&"false"===$(a.button).attr("aria-expanded")&&$(a.button).dropdown("toggle")},e=function(b){b.preventDefault(),"false"===$(a.button).attr("aria-expanded")&&a.options.focushowlist&&$(a.button).dropdown("toggle")};a.input.off("keyup",d).off("focus",e),a.input.on("keyup",d).on("focus",e),a.refresh()},refresh:function(a){var b=this,c=!1;return $(b.dropdownMenu.children).remove(),b.options.emptySearch||""!==a?(b.element.children("option").each(function(){var d=$(this).text(),e=$(this).val(),f=$(this).attr("class");if(a){if(d.indexOf(a)===-1)return;c=!0}$("<li class='"+f+"'><input type='hidden' value='"+e+"'><a href='#'>"+d+"</a></li>").click(function(a){a.preventDefault(),b.input.val(d),b.element.val(e),b.options.callBack(e),$("[name='"+b.getName()+"']").focus(),b.options.form&&b.options.form.fireHandler({type:"ChangeDataCheck",inputname:b.getName()})}).appendTo(b.dropdownMenu)}),c):c},getName:function(){var a=this;return a.element.attr("name")}}),$.widget("jepun.combobox",{_create:function(){this.element.attr("data-jepun-control","combobox"),this._createAutocomplete(),this._createShowAllButton()},_createAutocomplete:function(){var a=this.element.children(":selected"),b=a.val()?a.text():"";this.input=$("<input>").insertAfter(this.element).val(b).attr("name",this.element.attr("name")+"_txt").attr("title","").addClass("form-control custom-combobox-input ui-widget ui-widget-content ui-state-default ui-corner-left").autocomplete({delay:0,minLength:0,source:$.proxy(this,"_source")}).tooltip({classes:{"ui-tooltip":"ui-state-highlight"}}),this._on(this.input,{autocompleteselect:function(a,b){b.item.option.selected=!0,this._trigger("select",a,{item:b.item.option})},autocompletechange:"_removeIfInvalid"})},_createShowAllButton:function(){var a=this.input,b=!1;$("<a>").attr("tabIndex",-1).attr("title","Show All Items").html('<b class="caret"></b>').insertAfter(a).removeClass("ui-corner-all").addClass("custom-combobox-toggle ui-corner-right input-group-addon input-group-rwd").on("mousedown",function(c){c.preventDefault(),b=a.autocomplete("widget").is(":visible")}).on("click",function(c){c.preventDefault(),a.trigger("focus"),b||a.autocomplete("search","")})},_source:function(a,b){var c=new RegExp($.ui.autocomplete.escapeRegex(a.term),"i");b(this.element.children("option").map(function(){var b=$(this).text();if(this.value&&(!a.term||c.test(b)))return{label:b,value:b,option:this}}))},_removeIfInvalid:function(a,b){if(!b.item){var c=this.input.val(),d=c.toLowerCase(),e=!1;this.element.children("option").each(function(){if($(this).text().toLowerCase()===d)return this.selected=e=!0,!1}),e||(this.input.val("").attr("title",c+" didn't match any item"),this.element.val("-1"),this.input.autocomplete("instance").term="")}},_init:function(){var a=this.element.children(":selected"),b=a.val()?a.text():"";this.input.val(b)},_destroy:function(){this.element.show()}});var JepunScroll=JepunScroll||{};JepunScroll.__id=0,JepunScroll.$=function(a){var b=document.querySelectorAll(a);return 1===b.length?b[0]:b},JepunScroll.detectTouchScreen=function(){return"ontouchstart"in document.documentElement},JepunScroll.detectIE=function(){return!!document.all},JepunScroll.getScrollTop=function(){if("undefined"!=typeof window.pageYOffset)return window.pageYOffset;var a=document.body,b=document.documentElement;return b=b.clientHeight?b:a,b.scrollTop},JepunScroll.getOffset=function(a){for(var b=a.target?a.target:a.srcElement,c=0;b&&!isNaN(b.offsetLeft)&&!isNaN(b.offsetTop);)c+=b.offsetTop-b.scrollTop,b=b.offsetParent;return c=a.clientY+JepunScroll.getScrollTop()-c},JepunScroll.stopPropagation=function(a){a=a||window.event,a.stopPropagation?a.stopPropagation():(window.event.cancelBubble=!0,window.event.returnValue=!1)},JepunScroll.originalOnselectstart=!1,JepunScroll.enableSelection=function(a){a?window.document.onselectstart=JepunScroll.originalOnselectstart:(JepunScroll.originalOnselectstart=window.document.onselectstart,window.document.onselectstart=function(){return!1})},JepunScroll.CustomScroll=function(a,b){if(!JepunScroll.detectTouchScreen()){if(b=b||!1,b?this.el=a:this.el=JepunScroll.$(a),"undefined"!=typeof this.el.length&&this.el.length>1){this.elements=[];for(var c=0;c<this.el.length;c++)this.elements.push(new JepunScroll.CustomScroll(this.el.item(c),(!0)));return void(this.multiple=!0)}this.multiple=!1,this.el.id||(this.el.id="customScroll"+JepunScroll.__id++),this.el.className+=" customScroll",this.mouseDown=!1,this.UNSELECTABLE_CLASS=" unselectable",this.buildHTML(),this.addScrollbar(),this.refresh(),this.bindEvents(),this.SELECTION_TIMEOUT=!1}},JepunScroll.CustomScroll.prototype.buildHTML=function(){this.scrollDiv=JepunScroll.$("#"+this.el.id+" .scrollDiv"),this.scrollDiv.style.width=this.el.clientWidth+50+"px",this.contentDiv=JepunScroll.$("#"+this.el.id+" .scrollContent"),this.contentDiv.style.width=this.el.clientWidth+"px",this.refreshImages()},JepunScroll.CustomScroll.prototype.addScrollbar=function(){this.handle=document.createElement("div"),this.scrollbar=document.createElement("div"),this.scrollbar.className+=" scrollbar",this.scrollbar.appendChild(this.handle),this.el.appendChild(this.scrollbar)},JepunScroll.CustomScroll.prototype.bindEvents=function(){var a=this;this.scrollDiv.onscroll=function(){a.handle.style.marginTop=a.ratio*this.scrollTop+"px"},this.handle.onclick=function(a){JepunScroll.stopPropagation(a)},this.handle.onmousedown=function(b){b=b||window.event,JepunScroll.stopPropagation(b),a.contentDiv.className+=a.UNSELECTABLE_CLASS,JepunScroll.enableSelection(!1),a.clientY=b.clientY,a.scrollTop=a.scrollDiv.scrollTop,a.mouseDown=!0},this.el.onmouseup=function(){a.setMouseUpAndEnableSelection(a)},JepunScroll.detectIE()?this.el.onmouseleave=function(){a.setMouseUpAndEnableSelection(a)}:this.el.onmouseout=function(b){for(var c=b.relatedTarget;c;){if(c===this)return;c=c.parentNode}a.setMouseUpAndEnableSelection(a)},this.el.onmousemove=function(b){a.mouseDown&&(b=b||window.event,a.scrollDiv.scrollTop=(b.clientY-a.clientY)/a.ratio+a.scrollTop)},this.scrollbar.onclick=function(b){b=b||window.event,JepunScroll.stopPropagation(b);var c=JepunScroll.getOffset(b)-a.handle.clientHeight/2;a.scrollDiv.scrollTop=c/a.totalHandle*a.totalScrollable},this.el.onscroll=function(b){b.preventDefault(),a.el.scrollLeft=0}},JepunScroll.CustomScroll.prototype.setMouseUpAndEnableSelection=function(a){a.contentDiv.className=a.contentDiv.className.replace(a.UNSELECTABLE_CLASS,""),a.mouseDown=!1,clearTimeout(a.SELECTION_TIMEOUT),a.SELECTION_TIMEOUT=setTimeout(function(){JepunScroll.enableSelection(!0)},500)},JepunScroll.CustomScroll.prototype.refresh=function(a){var b;if(a=a||!1,this.multiple)for(b in this.elements)this.elements[b].refresh();else this.scrollDiv.clientHeight>this.contentDiv.clientHeight?this.scrollbar.style.display="none":this.scrollbar.style.display="block",this.handle.style.height=this.scrollDiv.clientHeight*(this.scrollDiv.clientHeight/this.contentDiv.clientHeight)+"px",this.totalScrollable=this.contentDiv.clientHeight-this.scrollDiv.clientHeight,this.totalHandle=this.scrollbar.clientHeight-this.handle.clientHeight,this.ratio=this.totalHandle/this.totalScrollable,this.handle.style.marginTop=this.ratio*this.scrollDiv.scrollTop+"px",this.refreshImages()},JepunScroll.CustomScroll.prototype.refreshImages=function(){var a,b,c;if(a=JepunScroll.$("#"+this.el.id+" .scrollinner img"),a.length>0)for(b=this,c=0;c<a.length;c++)a.item(c).onload=function(){b.refresh(),this.onload=null}},function(a){if(a.fn.validate){a.datepicker._selectDate2=a.datepicker._selectDate,a.extend(a.datepicker.regional[""],{validateDate:"請輸入正確日期格式",validateDateMin:"上架日&下架日不得在{0}之前",validateDateMax:"出生年月日格式不正確且日期不得在{0}之後",validateDateMinMax:"Please enter a date between {0} and {1}",validateDateCompare:"Please enter a date {0} {1}",validateDateToday:"today",validateDateOther:"the other date",validateDateEQ:"equal to",validateDateNE:"not equal to",validateDateLT:"before",validateDateGT:"after",validateDateLE:"not after",validateDateGE:"not before"}),a.extend(a.datepicker._defaults,a.datepicker.regional[""]),a.extend(a.datepicker,{_selectDate:function(b,c){this._selectDate2(b,c);var d=a(b),e=this._getInst(d[0]);!e.inline&&a.fn.validate&&d.parents("form").validate().element(d)},errorPlacement:function(b,c){var d=c.next("."+a.datepicker._triggerClass),e=!1;0===d.length&&(d=c.prev("."+a.datepicker._triggerClass),e=d.length>0),b[e?"insertBefore":"insertAfter"](d.length>0?d:c)},errorFormat:function(b,c,d){var e=a.datepicker._get(b,"dateFormat");return a.each(d,function(b,d){c=c.replace(new RegExp("\\{"+b+"\\}","g"),a.datepicker.formatDate(e,d)||"nothing")}),c}});var b=null;a.validator.addMethod("dpDate",function(c,d,e){b=d;var f=a.datepicker._getInst(d),g=a.datepicker._get(f,"dateFormat");try{var h=a.datepicker.parseDate(g,c,a.datepicker._getFormatConfig(f)),i=a.datepicker._determineDate(f,a.datepicker._get(f,"minDate"),null),j=a.datepicker._determineDate(f,a.datepicker._get(f,"maxDate"),null),k=a.datepicker._get(f,"beforeShowDay");return this.optional(d)||!h||(!i||h>=i)&&(!j||h<=j)&&(!k||k.apply(d,[h])[0])}catch(l){return!1}},function(c){var d=a.datepicker._getInst(b),e=a.datepicker._determineDate(d,a.datepicker._get(d,"minDate"),null),f=a.datepicker._determineDate(d,a.datepicker._get(d,"maxDate"),null),g=a.datepicker._defaults;return e&&f?a.datepicker.errorFormat(d,g.validateDateMinMax,[e,f]):e?a.datepicker.errorFormat(d,g.validateDateMin,[e]):f?a.datepicker.errorFormat(d,g.validateDateMax,[f]):g.validateDate}),a.validator.addClassRules("dpDate",{dpDate:!0});var c={equal:"eq",same:"eq",notEqual:"ne",notSame:"ne",lessThan:"lt",before:"lt",greaterThan:"gt",after:"gt",notLessThan:"ge",notBefore:"ge",notGreaterThan:"le",notAfter:"le"};a.validator.addMethod("dpCompareDate",function(d,e,f){if(this.optional(e))return!0;f=normaliseParams(f);var g=a(e).datepicker("getDate"),h=extractOtherDate(e,f[1]);if(!g||!h)return!0;b=e;var i=!0;switch(c[f[0]]||f[0]){case"eq":i=g.getTime()===h.getTime();break;case"ne":i=g.getTime()!==h.getTime();break;case"lt":i=g.getTime()<h.getTime();break;case"gt":i=g.getTime()>h.getTime();break;case"le":i=g.getTime()<=h.getTime();break;case"ge":i=g.getTime()>=h.getTime();break;default:i=!0}return i},function(d){var e=a.datepicker._getInst(b),f=a.datepicker._defaults;d=normaliseParams(d);var g=extractOtherDate(b,d[1],!0);return g="today"===d[1]?f.validateDateToday:g?a.datepicker.formatDate(a.datepicker._get(e,"dateFormat"),g,a.datepicker._getFormatConfig(e)):f.validateDateOther,f.validateDateCompare.replace(/\{0\}/,f["validateDate"+(c[d[0]]||d[0]).toUpperCase()]).replace(/\{1\}/,g)})}}(jQuery),function(a){"function"==typeof define&&define.amd?define(["../widgets/datepicker"],a):a(jQuery.datepicker)}(function(a){return a.regional["zh-TW"]={closeText:"完成",prevText:"上月",nextText:"下月",currentText:"今天",monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthNamesShort:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayNames:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayNamesShort:["周日","周一","周二","周三","周四","周五","周六"],dayNamesMin:["日","一","二","三","四","五","六"],weekHeader:"周",dateFormat:"yy/mm/dd",firstDay:1,isRTL:!1,showMonthAfterYear:!0,yearSuffix:"年"},a.setDefaults(a.regional["zh-TW"]),a.regional["zh-TW"]}),$.validator.addMethod("agerange",function(a,b,c){if(a=a.replace(/(^\s*)(\s*$)/g,""),!a)return!0;var d=c.minage,e=c.maxage,f=a.split("-"),g=jFun.realAge(f[0],f[1],f[2]);return g>=d&&g<=e}),$.validator.unobtrusive.adapters.add("agerange",["minage","maxage"],function(a){a.rules.agerange={minage:a.params.minage,maxage:a.params.maxage},a.messages.agerange=a.message}),$.validator.addMethod("selectitem",function(a,b,c){if(null===a)return!1;var d=c.emptyval;return a!==d}),$.validator.unobtrusive.adapters.add("selectitem",["emptyval"],function(a){a.rules.selectitem={emptyval:a.params.emptyval},a.messages.selectitem=a.message}),jQuery.validator.addMethod("idcard",function(a,b,c){var d,e,f=(c.culture.toUpperCase(),c.env),g=[1,10,19,28,37,46,55,64,39,73,82,2,11,20,48,29,38,47,56,65,74,83,21,3,12,30],h=a.toUpperCase();if(f&&"TEST"===f.toUpperCase())return!0;if(!h)return!0;e=h.split(""),d=g[h[0].charCodeAt(0)-65];for(var i=1;i<=8;i++)d+=parseInt(h[i])*(9-i);return d+=parseInt(h[9]),d%10===0}),$.validator.unobtrusive.adapters.add("idcard",["culture","env"],function(a){a.rules.idcard={culture:a.params.culture,env:a.params.env},a.messages.idcard=a.message}),$.validator.addMethod("datetimeformat",function(a,b,c){try{var d=c.culture.toUpperCase();switch(d){case"ZH-TW":return jFun.getDateTime(a)===a;default:return jFun.getDateTime(a)===a}return jFun.getDateTime(a)===a}catch(e){return!1}return!0}),$.validator.unobtrusive.adapters.add("datetimeformat",["culture"],function(a){a.rules.datetimeformat={culture:a.params.culture},a.messages.datetimeformat=a.message}),$.validator.addMethod("dateformat",function(a,b,c){
try{var d=(c.culture.toUpperCase(),c.format.toUpperCase());switch(d){case"YYYY/MM/DD":return jFun.getFullDate(a,"/")===a;case"YYYY-MM-DD":return jFun.getFullDate(a,"-")===a;case"YYYY/MM":return a+="/01",jFun.getFullDate(a,"/")===a;case"YYYY-MM":return a+="-01",jFun.getFullDate(a,"-")===a;default:return!1}}catch(e){return!1}}),$.validator.unobtrusive.adapters.add("dateformat",["culture","format"],function(a){a.rules.dateformat={culture:a.params.culture,format:a.params.format},a.messages.dateformat=a.message}),$.validator.addMethod("daterange",function(a,b,c){var d=new Date(c.minrange),e=new Date(c.maxrange),f=new Date(a);return f<=d&&f>e}),$.validator.unobtrusive.adapters.add("daterange",["minrange","maxrange"],function(a){a.rules.daterange={minrange:a.params.minrange,maxrange:a.params.maxrange},a.messages.daterange=a.message}),$.validator.addMethod("booleanrequired",function(a,b,c){try{c.culture.toUpperCase();return b.checked}catch(d){return!1}return!0}),$.validator.unobtrusive.adapters.add("booleanrequired",["culture"],function(a){a.rules.booleanrequired={culture:a.params.culture},a.messages.booleanrequired=a.message}),$.validator.addMethod("ageneed",function(a,b,c){if(a=a.replace(/(^\s*)(\s*$)/g,""),!a)return!0;var d=c.minage,e=$.parseJSON(c.needfield),f=a.split("-");1===f.length&&(f=a.split("/"));for(var g=jFun.realAge(f[0],f[1],f[2]),h=!0,i=$("#"+this.currentForm.id),j=0;j<e.length;j++){var k=i.getCtrl(e[j]);g<d&&(k.val().length<=0?(h=!1,k.removeClass("input-validation-error").addClass("input-validation-error")):k.removeClass("input-validation-error"))}return g>=d||h}),$.validator.unobtrusive.adapters.add("ageneed",["minage","needfield"],function(a){a.rules.ageneed={minage:a.params.minage,needfield:a.params.needfield},a.messages.ageneed=a.message}),$.validator.addMethod("requiregroup",function(a,b,c){var d=c.groupname,e=c.mininum,f=c.maximum,g=c.ischeckempty,h=$("#"+this.currentForm.id),i=0;if(h.getCtrl(d,"data-val-requiregroup-groupname").each(function(a,b){if(!$(b).is(":hidden")){switch(b.type){case"checkbox":case"radio":b.checked&&(i+=1);break;case"number":"-1"!==$(b).val()&&""!==$.trim($(b).val())&&parseFloat($(b).val())>0&&(i+=1);break;default:"-1"!==$(b).val()&&""!==$.trim($(b).val())&&null!=$(b).val()&&(i+=1)}h.resetValidation($(b).attr("name"))}}),0===i&&"False"===g||i>=e&&i<=f)return!0;switch(h.getCtrl(d,"data-val-requiregroup-groupname").each(function(a,c){if(!$(c).is(":hidden")){switch(c.type){case"checkbox":case"radio":if(c.checked)return!0;break;case"number":if("-1"!==$(c).val()&&""!==$.trim($(c).val())&&parseFloat($(c).val())>0)return!0;break;default:if("-1"!==$(c).val()&&""!==$.trim($(c).val())&&null!==$(c).val())return!0}c!==b&&h.validationError($(c).attr("name"),$(c).attr("data-val-requiregroup"))}}),b.type){case"checkbox":case"radio":if(b.checked)return!0;break;case"number":if("-1"!==$(b).val()&&""!==$.trim($(b).val())&&parseFloat($(b).val())>0)return!0;break;default:if("-1"!==$(b).val()&&""!==$.trim($(b).val())&&null!==$(b).val())return!0}return!1}),$.validator.unobtrusive.adapters.add("requiregroup",["groupname","mininum","maximum","ischeckempty"],function(a){a.rules.requiregroup={groupname:a.params.groupname,mininum:a.params.mininum,maximum:a.params.maximum,ischeckempty:a.params.ischeckempty},a.messages.requiregroup=a.message}),$.validator.addMethod("valchggroup",function(a,b,c){var d=c.groupname,e=c.mask,f=$("#"+this.currentForm.id),g=0;return f.getCtrl(d,"data-val-valchggroup-groupname").each(function(a,b){if(!$(b).is(":hidden")&&!$(b).is(":disabled"))switch(b.type){case"checkbox":var c=$(b).attr("data-jepun-field-holder").split("@@"),d=[];"True"===e&&$("#"+this.form.id).getCtrl(b.name).each(function(a,b){b.checked&&d.push($(b).val())}),("True"===e&&d.length>0||"False"===e)&&$("#"+this.form.id).getCtrl(b.name).each(function(a,b){b.checked?c.some(function(a,c,d){return a===$(b).val()})||(g+=1):c.some(function(a,c,d){return a===$(b).val()})&&(g+=1)});break;case"radio":var f=$(b).attr("data-jepun-field-holder");$("#"+this.form.id).getCtrl(b.name).each(function(a,b){b.checked&&$(b).val()!==f&&(g+=1)});break;case"date":var h=new Date($(b).val()),i=new Date($(b).attr("data-jepun-field-holder"));if(h!==i){if("True"===e&&0===$(b).val().length)break;g+=1}break;case"number":var j=parseFloat(""===$(b).val()?0:$(b).val()),k=parseFloat(""===$(b).attr("data-jepun-field-holder")?0:$(b).attr("data-jepun-field-holder"));if(j!==k){if("True"===e&&0===$(b).val().length)break;g+=1}break;default:if($(b).val()!==$(b).attr("data-jepun-field-holder")){if("True"===e&&0===$(b).val().length)break;g+=1}}}),g>0}),$.validator.unobtrusive.adapters.add("valchggroup",["groupname","mask"],function(a){a.rules.valchggroup={groupname:a.params.groupname,mask:a.params.mask},a.messages.valchggroup=a.message}),$.validator.addMethod("checkboxselect",function(a,b,c){var d=$("#"+this.currentForm.id);if(""!==c.refname){var e=d.getCtrl(c.refname);switch(e.type){case"checkbox":case"radio":if(!e.checked)return!0;break;case"number":if("-1"===e.val()||""!==$.trim(e.val())||0===parseFloat(e.val()))return!0;break;default:if("-1"===e.val()||""===$.trim(e.val())||null===e.val())return!0}}var f=0;return d.getCtrl($(b).attr("name")).each(function(a,b){switch(b.type){case"checkbox":case"radio":b.checked&&(f+=1);break;case"number":"-1"!==$(b).val()&&""!==$.trim($(b).val())&&parseFloat($(b).val())>0&&(f+=1);break;default:"-1"!==$(b).val()&&""!==$.trim($(b).val())&&null!=$(b).val()&&(f+=1)}}),f>=c.mininum}),$.validator.unobtrusive.adapters.add("checkboxselect",["mininum","refname"],function(a){a.rules.checkboxselect={mininum:a.params.mininum,refname:a.params.refname},a.messages.checkboxselect=a.message}),$.validator.addMethod("phonemask",function(a,b,c){if(""===a)return!0;if(a.length>c.maxlen)return!1;var d=new RegExp(c.pattern,"g");return d.test(a)}),$.validator.unobtrusive.adapters.add("phonemask",["maxlen","pattern"],function(a){a.rules.phonemask={maxlen:a.params.maxlen,pattern:a.params.pattern},a.messages.phonemask=a.message}),$.validator.addMethod("chkrule",function(a,b,c){if($.validator.messages.chkrule="",""===a)return!0;if("-1"===a&&"number"!==b.type)return!0;var d,e,f,g,h,i,j,k,l=jCom.urlPath(c.controlname,c.actionname),m={},n=void 0===$(b).getKeyVal()?"":$(b).getKeyVal(),o=$("#"+this.currentForm.id);switch(c.actionname){case"ChkNoticeDot":case"ChkUnitDot":if(/,/i.test(a)&&"ChkNoticeDot"!==c.actionname)return $.validator.messages.chkrule="買回單位不可包含 ',' ",!1;if(/,/i.test(a)&&"ChkNoticeDot"===c.actionname)return $.validator.messages.chkrule="通知點不可包含 ',' ",!1;if(h=parseInt($(b).attr("jepun-unit-dot")),i=a.split("."),2===i.length&&i[1].length>h)return $.validator.messages.chkrule="請輸入至小數位數 "+h+" 位",!1;var p=parseFloat(a),q=parseFloat($(b).attr("jepun-range-min")),r=parseFloat($(b).attr("jepun-range-max"));return $.validator.messages.chkrule=$(b).attr("jepun-range"),"ChkUnitDot"===c.actionname&&p<=0?($.validator.messages.chkrule="買回單位必須大於0",!1):!(!isNaN(q)||!isNaN(r))||(isNaN(q)?p<=r:isNaN(r)?p>=q:p<=r&&p>=q);case"ChkBuyAccMaxAmt":if(f=o.getCtrl("FID"+n).val(),"-1"===f||""===f)return!0;if(m.CID=f.split("@@")[0],m.BANKNO=a.split("@@")[0],e=parseFloat(o.getCtrl("AMT"+n).val()),e<=0||isNaN(e))return!0;m.AMT=e;break;case"ChkFundTransferLowAmt":if(e=parseFloat(a),e<=0||isNaN(e))return $.validator.messages.chkrule="金額需為大於0的數值",!1;if(m.AMT=e,f=o.getCtrl("TO_FID"+n).val(),"-1"===f||""===f||null===f)return!0;m.CID=f.split("@@")[0],m.FID=f.split("@@")[1];break;case"ChkFundContractLowAmt":case"ChkFundOrderLowAmt":case"ChkFundMinSellUnit":if("ChkFundContractLowAmt"===c.actionname&&(j=parseFloat(o.getCtrl("FEE"+n).val()),j>=0||!isNaN(j)?m.FEE=j:m.FEE=0),/,/i.test(a))return $.validator.messages.chkrule="金額不可包含 ',' ",!1;if(e=parseFloat(a),e<=0||isNaN(e))return $.validator.messages.chkrule="金額需為大於0的數值",!1;if(m.AMT=e,f=o.getCtrl("FID"+n).val(),"-1"===f||""===f)return!0;if(m.CID=f.split("@@")[0],m.FID=f.split("@@")[1],"ChkFundMinSellUnit"===c.actionname&&(k=$.parseJSON($(b).getKeyVal("data-jepun-entity")),m.SELECT_KIND=k.APP_FROM!==-1?k.APP_FROM+1:3,h=parseInt(f.split("@@")[2]),i=a.split("."),2===i.length&&i[1].length>h))return $.validator.messages.chkrule="請輸入至小數位數 "+h+" 位",!1;break;case"ChkFundContractLowAmtOut":case"ChkFundOrderLowAmtOut":case"ChkFundMinSellUnitOut":if("ChkFundContractLowAmtOut"===c.actionname&&(j=parseFloat(o.getCtrl("OUT_FEE"+n).val()),j>=0||!isNaN(j)?m.FEE=j:m.FEE=0),/,/i.test(a))return $.validator.messages.chkrule="金額不可包含 ',' ",!1;if(e=parseFloat(a),e<=0||isNaN(e))return $.validator.messages.chkrule="金額需為大於0的數值",!1;if(m.AMT=e,f=o.getCtrl("OUT_FID"+n).val(),"-1"===f||""===f)return!0;if(m.CID=f.split("@@")[0],m.FID=f.split("@@")[1],m.AID=f.split("@@")[4],g=o.getCtrl("OUT_CUR"+n).val(),m.CUR=g,"ChkFundMinSellUnitOut"===c.actionname&&(h=parseInt(f.split("@@")[2]),i=a.split("."),2===i.length)){if("TWD"===g)return $.validator.messages.chkrule="台幣金額小數位數為 0",!1;if(i[1].length>h)return $.validator.messages.chkrule="請輸入至小數位數 "+h+" 位",!1}break;case"ChkFundRisk":if("-1"===a||""===f)return!0;m.CID=a.split("@@")[0],m.FID=a.split("@@")[1];break;case"ChkFundRiskOut":if("-1"===a||""===f)return!0;m.CID=a.split("@@")[0],m.FID=a.split("@@")[1],m.AID=a.split("@@")[4];break;case"TaAccChk":if(f=$(b).attr("name").indexOf("BANK_")>=0?o.getCtrl("BANKNO"+n).val():o.getCtrl("BuyBANKNO"+n).val(),f===-1||""===f||""===a||void 0===f)return!0;m.ACCOUNT=a,m.BANKNO=f;break;case"TaAccChkOut":if(f=$(b).attr("name").indexOf("BANK_")>=0?o.getCtrl("OUT_BANKNO"+n).val():o.getCtrl("OUT_BuyBANKNO"+n).val(),f===-1||""===f||""===a||void 0===f)return!0;m.ACCOUNT=a,m.BANKNO=f}return $.ajax({type:"POST",url:l,async:!1,data:$.extend({},m,{__RequestVerificationToken:GlbEnv.token()}),dataType:"json",success:function(a){d=a}}),""===d||($(b).attr("data-val-chkrule",d),$.validator.messages.chkrule=d,!1)},function(a,b){return $.validator.messages.chkrule}),$.validator.unobtrusive.adapters.add("chkrule",["actionname","controlname"],function(a){a.rules.chkrule={actionname:a.params.actionname,controlname:a.params.controlname}}),$.validator.addMethod("chkneed",function(a,b,c){var d=$("#"+this.currentForm.id);return!(d.find("input[name="+c.chkname+"][value="+c.chkvalue+"]:checked").length>0&&!a)}),$.validator.unobtrusive.adapters.add("chkneed",["chkname","chkvalue"],function(a){a.rules.chkneed={chkname:a.params.chkname,chkvalue:a.params.chkvalue},a.messages.chkneed=a.message}),$.validator.addMethod("chkneedgroup",function(a,b,c){var d=c.group,e=c.min,f=c.max,g=0,h=$("#"+this.currentForm.id);if(h.find("input[name="+c.chkname+"][value="+c.chkvalue+"]:checked").length>0){if(h.getCtrl(d,"data-val-chkneedgroup-group").each(function(a,b){if(!$(b).is(":hidden")){switch(b.type){case"checkbox":case"radio":b.checked&&(g+=1);break;case"number":""!==$.trim($(b).val())&&(g+=1);break;default:"-1"!==$(b).val()&&""!==$.trim($(b).val())&&null!=$(b).val()&&(g+=1)}h.resetValidation($(b).attr("name"))}}),g>=e&&g<=f)return!0;switch(h.getCtrl(d,"data-val-chkneedgroup-group").each(function(a,c){if(!$(c).is(":hidden")){switch(c.type){case"checkbox":case"radio":if(c.checked)return!0;break;case"number":if("-1"!==$(c).val()&&""!==$.trim($(c).val())&&parseFloat($(c).val())>0)return!0;break;default:if("-1"!==$(c).val()&&""!==$.trim($(c).val())&&null!==$(c).val())return!0}c!==b&&h.validationError($(c).attr("name"),$(c).attr("data-val-chkneedgroup"))}}),b.type){case"checkbox":case"radio":if(b.checked)return!0;break;case"number":if("-1"!==$(b).val()&&""!==$.trim($(b).val())&&parseFloat($(b).val())>0)return!0;break;default:if("-1"!==$(b).val()&&""!==$.trim($(b).val())&&null!==$(b).val())return!0}return!1}return!0}),$.validator.unobtrusive.adapters.add("chkneedgroup",["chkname","chkvalue","group","min","max"],function(a){a.rules.chkneedgroup={chkname:a.params.chkname,chkvalue:a.params.chkvalue,group:a.params.group,min:a.params.min,max:a.params.max},a.messages.chkneedgroup=a.message}),$.validator.addMethod("requiredepend",function(a,b,c){var d=c.groupname,e=$("#"+this.currentForm.id),f=!1,g=$(b).attr("name"),h=e.getCtrl(d,"data-val-requiredepend-groupname").length,i=0;if(e.getCtrl(d,"data-val-requiredepend-groupname").each(function(a,b){if(g!==$(b).attr("name")&&!$(b).is(":hidden"))switch(b.type){case"checkbox":case"radio":b.checked&&(i+=1);break;case"number":"-1"!==$(b).val()&&""!==$.trim($(b).val())&&parseFloat($(b).val())>0&&(i+=1);break;default:"-1"!==$(b).val()&&""!==$.trim($(b).val())&&null!=$(b).val()&&(i+=1)}}),h===i)return!0;if(0===i)return!0;switch(b.type){case"checkbox":case"radio":b.checked&&(f=!0);break;case"number":"-1"!==$(b).val()&&""!==$.trim($(b).val())&&parseFloat($(b).val())>0&&(f=!0);break;default:"-1"!==$(b).val()&&""!==$.trim($(b).val())&&null!==$(b).val()&&(f=!0)}return f}),$.validator.unobtrusive.adapters.add("requiredepend",["groupname"],function(a){a.rules.requiredepend={groupname:a.params.groupname},a.messages.requiredepend=a.message}),$.validator.addMethod("requiredependwith",function(a,b,c){var d=c.groupname,e=c.ismain;if("True"===e)return!0;var f=$("#"+this.currentForm.id),g=!1,h=0;if(f.getCtrl(d,"data-val-requiredependwith-groupname").each(function(a,b){if("True"===$(b).attr("data-val-requiredependwith-ismain")&&!$(b).is(":hidden"))switch(b.type){case"checkbox":case"radio":b.checked&&(h+=1);break;case"number":"-1"!==$(b).val()&&""!==$.trim($(b).val())&&parseFloat($(b).val())>0&&(h+=1);break;default:"-1"!==$(b).val()&&""!==$.trim($(b).val())&&null!==$(b).val()&&(h+=1)}}),0===h)return!0;switch(b.type){case"checkbox":case"radio":b.checked&&(g=!0);break;case"number":"-1"!==$(b).val()&&""!==$.trim($(b).val())&&parseFloat($(b).val())>0&&(g=!0);break;default:"-1"!==$(b).val()&&""!==$.trim($(b).val())&&null!==$(b).val()&&(g=!0)}return g}),$.validator.unobtrusive.adapters.add("requiredependwith",["groupname","ismain"],function(a){a.rules.requiredependwith={groupname:a.params.groupname,ismain:a.params.ismain},a.messages.requiredependwith=a.message}),$.validator.addMethod("notequalto",function(a,b,c){var d=c.groupname,e=$("#"+this.currentForm.id),f=!0,g=$(b).attr("name");return e.getCtrl(d,"data-val-notequalto-groupname").each(function(a,c){if(g!==$(c).attr("name")&&!$(c).is(":hidden"))switch(c.type){case"checkbox":case"radio":b.checked===c.checked&&(f=!1);break;case"number":parseFloat($(b).val())===parseFloat($(c).val())&&""!==$.trim($(b).val())&&(f=!1);break;default:$.trim($(b).val())===$.trim($(c).val())&&""!==$.trim($(b).val())&&"-1"!==$.trim($(b).val())&&(f=!1)}}),f}),$.validator.unobtrusive.adapters.add("notequalto",["groupname"],function(a){a.rules.notequalto={groupname:a.params.groupname},a.messages.notequalto=a.message});