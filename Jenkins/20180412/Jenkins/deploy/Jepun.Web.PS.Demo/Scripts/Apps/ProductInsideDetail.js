/*! jepun 2018-03-29 */
$(document).ready(function(){var a,b=$("#FormInsideDetail").comm(),c=["#ff3300","#007c7e","#ff8000","#7dc6e1","#ebcfd7","#51eafb","#116710","#8888ee","#ae5700","#9f099b","#b3b3b3"];b.getCtrl("TabSelect").on("change",function(a){a.preventDefault(),b.getCtrl("TabList").getCtrl($(this).val(),"href").click()}),b.getCtrl("TabList").getCtrl("tab","data-toggle").on("click",function(a){b.getCtrl("TabSelect").val($(this).attr("href"))}),"2"===b.getVal("Link")&&b.getCtrl("Link2").click();var d,e;d=b.getCtrl("StartDate").val(),e=b.getCtrl("EndDate").val(),$.when(b.getCtrl("StartDate,EndDate").datepicker({dateFormat:"yy/mm/dd",firstDay:0,changeYear:!0,changeMonth:!0,yearRange:"2000:2030",maxDate:new Date})).then(b.callDataBus("Product/GetPsProductFundOnlineT7_8_9",{ProductFundNo:b.getCtrl("ProductFundNo").val(),StartDate:b.getVal("StartDate"),EndDate:b.getVal("EndDate")})),b.getCtrl("searchBtn").on("click",function(c){c.preventDefault(),a.data.datasets=[],a.data.labels=[],a.update(),b.callDataBus("Product/GetPsProductFundOnlineT7_8_9",{ProductFundNo:b.getCtrl("ProductFundNo").val(),StartDate:b.getVal("StartDate"),EndDate:b.getVal("EndDate")})}),b.addHandler("HoldingWeightPie",function(a){var c=b.getCtrl("HoldingWeightPie"),d=$.parseJSON(a.Name),e=$.parseJSON(a.Weight),f=$.parseJSON(a.Color);new Chart(c,{type:"pie",fontSize:16,defaultFontFamily:"Helvetica, 微軟正黑體,  Arial",data:{labels:d,datasets:[{data:e,backgroundColor:f}]},options:{responsive:!0,maintainAspectRatio:!1,legend:{labels:{defaultFontFamily:"Helvetica, 微軟正黑體,  Arial",fontSize:14}},tooltips:{mode:"index"}}})}),b.addHandler("GetPsProductFundOnlineT7_8_9",function(d){for(var e=b.getCtrl("productline"),f=$.parseJSON(d.Name),g=$.parseJSON(d.DateLabel),h=$.parseJSON(d.Weight),i=[],j=0;j<f.length;j++){var k={};k.label=f[j],k.fill=!1,k.data=h[j],k.backgroundColor=c[j],k.borderColor=c[j],k.pointRadius=0,k.borderWidth=2,i.push(k)}console.log(i),a=new Chart(e,{type:"line",fontSize:16,defaultFontFamily:"Helvetica, 微軟正黑體,  Arial",data:{labels:g[0],datasets:i},options:{maintainAspectRatio:!1,responsive:!0,tooltips:{mode:"index",intersect:!1},hover:{mode:"nearest",intersect:!0}}})}),"00003"===b.getVal("FundTypeCode")?b.callDataBus("Product/GetPsHoldingWeightCurOnlineT1",{HoldingWeightCurNo:b.getCtrl("ProductFundNo").val()}):b.callDataBus("Product/GetPsHoldingWeightOnlineT1",{HoldingWeightNo:b.getCtrl("ProductFundNo").val()}),b.getCtrl("testBtn").on("click",function(a){a.preventDefault(),window.open("../Fundration?location="+b.getVal("location"))})});